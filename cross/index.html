<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>

<style>
#box{
	width:550px;
	height:210px;
	margin:100px auto
}
#box div{
	width:100px;
	height:100px;
	background:#000;
	position:relative;
	color:#fff;
	overflow:hidden;
	margin-right:10px;
	margin-bottom:10px;
	float:left;
}
#box div span{
	width:100px;
	height:100px;
	background:red;
	position:absolute;
	left:0;
	top:-100px;
}
</style>
<script src="doMove.js"></script>
<script>
/*function getDir(obj,ev){
	var x = obj.getBoundingClientRect().left+obj.offsetWidth/2-ev.clientX;
	var y = obj.getBoundingClientRect().top+obj.offsetHeight/2-ev.clientY;
	return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;
};*/
function getDir(obj,ev){
	var x = obj.getBoundingClientRect().left+obj.offsetWidth/2-ev.clientX;
	var y = obj.getBoundingClientRect().top+obj.offsetHeight/2-ev.clientY;
	return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;
};
function change(obj){
	var aS = obj.children[0];
	obj.onmouseenter = function(ev){
		var oEvent = ev||event;
		var dir = getDir(obj,oEvent);
		switch(dir){
			case 0:
				aS.style.left = '100px';
				aS.style.top = 0;
				break;
			case 1:
				aS.style.left = 0;
				aS.style.top ='100px' ;
				break;
			case 2:
				aS.style.left = '-100px';
				aS.style.top = 0;
				break;
			case 3:
				aS.style.left = 0;
				aS.style.top = '-100px';
				break;
		}
		move(aS,{left:0,top:0})
	};
	obj.onmouseleave = function(ev){
		var oEvent = ev||event;
		var dir = getDir(obj,oEvent);
		switch(dir){
			case 0:
				move(aS,{left:100,top:0})	
				break;
			case 1:
				move(aS,{left:0,top:100})	
				break;
			case 2:
				move(aS,{left:-100,top:0})	
				break;
			case 3:
				move(aS,{left:0,top:-100})	
				break;
		}	
	};
};
window.onload = function(){
	var oBox = document.getElementById('box');
	var aDiv = oBox.children;
	var H = 100;
	var W = 100;
	//布局div图片
	//第一行
	for(var i = 0 ; i < aDiv.length/2 ; i++){
		aDiv[i].style.backgroundImage = 'url(img/tu.png)';
		aDiv[i].style.backgroundPosition = '-'+i*W+'px -'+0+'px';
	}
	//第一行
	for(var i = aDiv.length/2 ; i < aDiv.length ; i++){
		aDiv[i].style.backgroundImage = 'url(img/tu.png)';
		aDiv[i].style.backgroundPosition = '-'+i%5*W+'px -'+100+'px';
	}//%5 不然是678910
	//布局div图片完毕
	
	//布局span图片
	var aSpan = document.getElementsByTagName('span');
	for(var i = 0 ; i < aDiv.length ; i++){
		aSpan[i].style.backgroundImage = 'url(img/'+0+i+'.jpg)';
		aSpan[i].style.overflow = 'hidden';
		aSpan[i].innerHTML = '案例'+(i+1);
		aSpan[i].style.textAlign = 'center';
		aSpan[i].style.lineHeight = '100px';
		aSpan[i].style.opacity = 0.8;
	}
	
	//布局span图片完
	
	for(var i = 0 ; i < aDiv.length ;i++){
		change(aDiv[i]);
	}	
};
</script>
</head>

<body>
    <div id="box">
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    	<div>
        	<span></span>
        </div>
    </div>
</body>
</html>
